{% extends "base_files/admin_base.html" %}
{% load static %}
{% block admin_content %}
  <link rel="stylesheet" href="{% static 'css/admin_home.css' %}">
  <div class="row">
    <div class="col-4">
      <div class="text">USERS</div>
      <div class="user-card card">
        <div class="card-body">hello user</div>
      </div>
      <div class="user-card card mt-3">
        <div class="card-body">hello user</div>
      </div>
      <div class="user-card card mt-3">
        <div class="card-body">hello user</div>
      </div>
    </div>
    <div class="col-5">
      <div class="text">Subscribes daily</div>
      <canvas class="point-chart card" id="dailySubscribesChart"></canvas>
    </div>
    <div class="col-3">
      <div class="text">Subscribes daily</div>
      <canvas class="subcribers-chart " id="subscribersChart"></canvas>
    </div>
  </div>
{% endblock admin_content %}
{% block admin_scripts %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
  // Wait for the DOM to be fully loaded
document.addEventListener('DOMContentLoaded', function() {
    // Daily Subscribes Chart
    const dailySubscribesCtx = document.getElementById('dailySubscribesChart').getContext('2d');
    new Chart(dailySubscribesCtx, {
        type: 'line',
        data: {
            labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6'],
            datasets: [{
                label: 'Dataset',
                data: [65, 100, 80, 81, 56, 155],
                borderColor: 'rgba(128, 90, 213, 1)',
                backgroundColor: 'rgba(128, 90, 213, 0.2)',
                fill: true,
                pointStyle: 'circle',
                pointRadius: 10,
                pointHoverRadius: 15
            }]
        },
        options: {
            responsive: true,
            plugins: {
                title: {
                    display: true,
                    text: 'Daily Subscribes'
                }
            },
            scales: {
                x: {
                    grid: {
                        display: false
                    }
                },
                y: {
                    grid: {
                        display: false
                    }
                }
            }
        }
    });

    // Subscribers Chart
    const subscribersCtx = document.getElementById('subscribersChart').getContext('2d');
    new Chart(subscribersCtx, {
        type: 'doughnut',
        data: {
            labels: ['Subscribed Users', 'Unsubscribed Users'],
            datasets: [{
                label: 'User Subscriptions',
                data: [75, 25],
                backgroundColor: ['#6a55f1', '#e5e5e5'],
                hoverOffset: 4,
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        usePointStyle: true,
                    }
                },
                tooltip: {
                    enabled: true
                }
            },
            cutout: '80%'
        }
    });

    // Function to change point style of Daily Subscribes chart
    window.changePointStyle = function(style) {
        const chart = Chart.getChart('dailySubscribesChart');
        if (chart) {
            chart.data.datasets.forEach(dataset => {
                dataset.pointStyle = style;
            });
            chart.update();
        }
    };

    // You can add more charts here as needed
});
  </script>
{% endblock admin_scripts %}
